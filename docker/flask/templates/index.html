<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="theme-color" content="#000000" />

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <link rel="stylesheet" href="../static/css/index.css">

    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.
      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>IoT App</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="/">
          <img className="logo_image" src=../static/img/logo_body.svg alt="logo"/>IoT Web Controller
      </a>

      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Account
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="https://github.com/BenjaminPalko/IoTHomeServer">GitHub Source Code</a>
              <a class="dropdown-item" href="#">Change Password</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="#">Log Out</a>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link disabled" href="#">Signed In As: JerrySquad</a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="jumbotron" style="text-align: center">
      <h1>IoT Web Controller</h1>
      <h5>Simple IoT platform that controls Arduino devices remotely.</h5>
      <h6>Press "Find Out More!" to learn more about each device. </h6>
    </div>
    <div class="container" >
      <div class="row text-center">
        <div class="col-lg-3 col-md-6 mb-4">
          <div class="card h-100">
            <img style="width: 50%; align-self: center" class="card-img-top" src="../static/img/led-lamp.png" alt="">
            <form>
              <div class="card-body">
                  <h3 class="card-title">LED Light</h3>
                    <input id="colorpicker" name="ledSwitch" type="color" onChange={led_change(this.value)}>
                    <h5>Select a Custom color</h5>
                </div>
                <div class="card-footer">
                  <button type="submit" name="colorpicked" class="btn btn-primary" value="colorpicked">
                    Submit
                  </button>
                </div>
            </form>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-4">
          <div class="card h-100">
            <img style="width: 50%; align-self: center" class="card-img-top" src="../static/img/thermometer.png" alt="">
              <form name=temperatureThread>
                <div class="card-body">
                  <h3 class="card-title">Temperature Sensor</h3>
                  <h3 style="background-color: rgba(218, 213, 213, 0.788)" id="Temperature">Processing...
                  </h3>
                </div>
              </form>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-4">
          <div class="card h-100">
            <img style="width: 50%; align-self: center" class="card-img-top" src="../static/img/rain.png" alt="">
            <form onsubmit="forecast_submit(this); return false">
              <div class="card-body">
                  <h3 class="card-title">Weather Forecast</h3>
                  <input type="text" name="forecast" placeholder="City, Province/Country" />
                </div>
                <div class="card-footer">
                  <button type="submit" class="btn btn-primary" name="forecastSet">
                    Submit
                  </button>
                </div>
            </form>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-4">
          <div class="card h-100">
            <img style="width: 50%; align-self: center" class="card-img-top" src="../static/img/shield.png" alt="">
            <form onsubmit="pin_submit(this); return false">
              <div class="card-body">
                  <h3 class="card-title">Pin Lock Security Combo</h3>
                  <input type="text" name="pinCombo" pattern="[1-3]{4}" maxlength="4" placeholder="Set Pin Code" />
              </div>
                <div class="card-footer">
                  <button type="submit" class="btn btn-primary" name="pinSet">
                    Submit
                  </button>
                </div>
            </form>
          </div>
        </div>
      </div>
    </div>
        <!-- /.container -->
        <!-- Footer -->
      <footer class="py-5 bg-dark">
        <div class="container">
          <p class="m-0 text-center text-white">Copyright &copy; IoT Web 2019</p>
        </div>
        <!-- /.container -->
      </footer>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
    <script type="text/javascript">
      var socket = io.connect('127.0.0.1:5000');
      socket.on('connect', function() {
          socket.emit('my event', {data: 'I\'m connected!'});

          setInterval(function(){ socket.emit('temperatureLoop', 0) }, 5000);

      });
      socket.on('temperature', function(data){update_temperature(data)});
      function update_temperature(temperature)
      {
          document.getElementById('Temperature').innerText = temperature;
      }
      function led_change(value)
      {
          socket.emit('rgbled_hex', value);
          document.getElementById('colorpicker').value = value;
      }
      function pin_submit(form)
      {
          socket.emit('door_pin', form.pinCombo.value);
      }
      function forecast_submit(form)
      {
          socket.emit('weather_location', form.forecast.value)
      }
    </script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>
</html>